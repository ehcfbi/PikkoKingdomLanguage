<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PikkoKingdomLanguage</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="keyboard">
        <button class="key"><img src="char_koigh,yaigh.png" alt="koigh,yaigh" class="char_koigh,yaigh"></button>
        <button class="key"><img src="char_koigh.png" alt="koigh"></button>
        <button class="key"><img src="char_yaigh.png" alt="yaigh"></button>
        <button class="key"><img src="char_pikko.png" alt="pikko"></button>
        <button class="key"><img src="char_shie.png" alt="shie"></button>
        <button class="key"><img src="char_di.png" alt="di" class="char_di"></button>
        <button class="key"><img src="char_niekae.png" alt="niekae""></button>
        <button class="key"><img src="char_eigh.png" alt="eigh" class="char_eigh"></button>
        <button class="key"><img src="char_pi.png" alt="pi"></button>
        <!-- 他の文字も同様に追加 -->
        <button id="newline" class="key">Enter</button>
    </div>
    <div id="output" class="output"></div>
    <script>
        document.querySelectorAll('.key').forEach(button => {
            button.addEventListener('click', () => {
                const outputDiv = document.getElementById('output');
                if (button.id === "newline") {
                    // 改行を追加
                    const line = document.createElement('div');
                    line.classList.add('line');
                    outputDiv.appendChild(line);
                } else {
                    const charImage = button.querySelector('img').cloneNode(true);
                    let lastLine = outputDiv.lastElementChild;

                    // 最初の改行前に文字が挿入される場合を処理
                    if (!lastLine || !lastLine.classList.contains('line')) {
                        lastLine = document.createElement('div');
                        lastLine.classList.add('line');
                        outputDiv.appendChild(lastLine);
                    }

                    const lines = document.querySelectorAll('.line');
                    const isEvenLine = (lines.length % 2 === 0);

                    if (isEvenLine) {
                        // 偶数行の場合は逆順に挿入
                        lastLine.insertBefore(charImage, lastLine.firstChild);

                        // 偶数行でchar_bとchar_cを反転
                        if (charImage.classList.contains('char_di') || charImage.classList.contains('char_koigh,yaigh') || charImage.classList.contains('char_koigh,yaigh')) {
                            charImage.classList.add('flip-horizontal');
                        }
                    } else {
                        // 奇数行の場合は順序通りに挿入
                        lastLine.appendChild(charImage);
                    }
                }
            });
        });
    </script>
</body>
</html>
